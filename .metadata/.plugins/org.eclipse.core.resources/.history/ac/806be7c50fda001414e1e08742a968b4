package commands;

import classes.Helper;
import interfaces.Command;
import interfaces.DirChanger;

import java.io.File;
import java.nio.file.NoSuchFileException;

/**
 * Created by Ian on 01.04.2015.
 */
public class Open implements Command{

    @Override
    public String keyWord() {
        return "/open";
    }

    @Override
    public boolean check(String command, DirChanger dirChanger) throws NoSuchFileException {
        Helper help = new Helper();
        String[] words = command.split(" ");
        if((words.length==2)&&(help.correctPath(words[1], dirChanger.getDir()).exists()))
                return true;
        if (!(help.correctPath(words[1], dirChanger.getDir()).exists())){
        	throw new NoSuchFileException(" no such file: "+ words[1]);
        }
        throw new NoSuchCommandException("wrong command: "+ words[0]);
        	
    }

    @Override
    public void execute(String command, DirChanger dirChanger) {
        Helper help = new Helper();
        File file = help.correctPath(command.split(" ")[1], dirChanger.getDir());
        if(file.isDirectory())
            dirChanger.setDir(file);

    }
}
